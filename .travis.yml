sudo: required
language: python

services:
  - docker

python:
  - "3.4"
  - "3.5"
  - "3.6-dev"

install:
  - python setup.py install
  - pip install -Ur requirements.txt
  - pip install codecov

script:
  - make cov-ci
  - python setup.py check -ms

env:
  global:
    - PYTHON=python
  matrix:
    - PYTHONASYNCIODEBUG=x
    - PYTHONASYNCIODEBUG=

cache:
  directories:
  - $HOME/.cache/pip

before_cache:
  - rm -f $HOME/.cache/pip/log/debug.log

after_script:
  - codecov

deploy:
  provider: pypi
  user: virmir49
  password:
    secure: "YcyMRjDWi0HhMzOb5RE2nb+8Cq1/g0Vqtkx3qJBf+dOSy1kGM62BwJgmLTso898DGlBc49d2YLdl2I4EQo9O4OgzeCZ1GZJD3l2VJyT0RVqSRPjrcgjrkEubUIsx2mslUbi4FUeE6dDweIqxyc+cMuBv0jDIlId/iDmgxchZolQ7yGMHOeaHofrIWJLs5IVOlnya1/mAeYXvryGPcA9n/e8IcPIGAKD8tBWSUhhxSysvlaUkbJIbH5eMhn4jMMMczqMH+pkAWgVaGVCjWVD7gGeEIp1GsDX9ufVJHyMTNinSBGeyEjkLupFuBQIq62bGJc6AUHkoaq90EiNUYPLKs5AIkrgxhPnUaSlfOJy0qnuwRdIZUHx2yyOQmoavmN3SYRFRYg7Lfo5BhHzyQVFIxbghqc9hRyF0vvpSOGw8ERMrlgzx4yHu3kjM6cU1kdOIKSEL0GatuB+9GgwP978XynLRBrhTY6GCiRWehsmevMUHeqMhoF3vRU8FvH0hmzjlYozKw2odsb5QW4ITh93pQrfNiMIqouhJ3hGT7uu1aSz9iE408x6xmovAi36HFvSaGhScxiIYe6E0pCFC6wBsD86R2vLgrHG8swQ9SEDsAT4rV3yWGfd5xjavvbYbN2RO/2v+2qjUO3WUVEhgltk3Eh6nM3Z+2GyIPatmBdalbno="
  distributions: "sdist bdist_wheel"
  on:
    tags: true
    all_branches: true
    python: 3.5